* bank test: switch through all four banks

ws:
       equ  >8300
ws_r0lb:
       equ ws + 1

* GPL header

       aorg >6000
       
       data >aa01
       data >0000
       data >0000
       data menu
       data >0000
       data >0000
       data 0
       data 0

       copy "vmbw.a99"

       .defm test
       li   r1, #1
       c    @!data, r1
       jeq  !cont
       b    @bad
!data  data #1
!cont
       .endm

       .defm bad
       li   r1, #1
       c    @!data, r1
       jeq  !cont
       b    @bad
!data  data #1 + 1
!cont
       .endm

menu:
       data 0
       data main
       byte 13
       text 'BANK TEST /2'

       even
main:
       limi 0
       lwpi ws

       limi 2
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       nop
       limi 0
       b    @good

t_good:
       text 'BANK 2: OK '
t_bad:
       text 'BANK 2: BAD'
       
good:
       li   r1, t_good
       jmp  !
bad:
       li   r1, t_bad
!      li   r0, 7 * 32 + 10
       li   r2, 11
       bl   @vmbw

       mov  @next, @>8320
       mov  @next+2, @>8322
       mov  @next+4, @>8324
       mov  @next+6, @>8326
       b    @>8320

next:
       clr  @>6004
       b    @main   ; in next bank

       end
