* read all bytes in cart space
       
ws:
       equ  >83e0
ws_r0lb:
       equ  ws + 1

       aorg >6000

* GPL header

       data >aa01
       data >0000
       data >0000
       data menu
       data >0000
       data >0000
       data 0
       data 0

       copy "vmbw.a99"
       
menu:
       data 0
       data main
       byte 12
       text 'ADDRESS TEST'

       even

good:
       li   r1, t_good
       jmp  !
bad:
       li   r1, t_bad
!      li   r0, 330
       li   r2, 14
       bl   @vmbw

       limi 2
       jmp  $

t_good:
       text '*** ALL OK ***'
t_bad:
       text 'XXX FAILED XXX'

       even
main:
       limi 0
       lwpi ws

       .defm test
       li   r1, #1
       c    @!data, r1
       jeq  !cont
       b    @bad
!data  data #1
!cont
       .endm

       .defm bad
       li   r1, #1
       c    @!data, r1
       jeq  !cont
       b    @bad
!data  data #1 + 1
!cont
       .endm

       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555
       .test >aaaa
       .test >5555

       nop
       b    @good

end_of_program
       
       end
